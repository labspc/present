---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const allPosts = await getCollection('blog');
const posts = allPosts
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, 7);  // åªæ˜¾ç¤ºæœ€æ–°çš„7ç¯‡æ–‡ç« 
---

<Layout title="Present">
    <main>
        <h1>æˆ‘çš„æ—¥è®°å›¾ç‰‡åšå®¢</h1>
        <h2>è®°å½•ğŸ“å½“ä¸‹ä¸€ç¬ ä½“æ‚Ÿâ¤ï¸ç”Ÿå‘½æƒ…æ„Ÿ</h2> <!-- å‰¯æ ‡é¢˜ -->
		<p class="blog-intro">
			è®©æˆ‘ä»¬æ´»åœ¨è¿™ä¸ªä¸–ç•Œä¸Šï¼Œè®©æˆ‘ä»¬ç«™åœ¨å¤§åœ°ä¸Šçš„ï¼Œ
			ç»ä¸æ˜¯æˆ‘ä»¬å¤´è„‘çš„ç†æ€§ï¼Œè€Œæ˜¯ç”Ÿå‘½æƒ…æ„Ÿã€‚
			--ç‹å¾·å³°ã€Šäººæ–‡æ²¿æ¼”è®²å½•ã€‹
		</p> <!-- åšå®¢ä»‹ç» -->
        <nav>
            <a href="/archive">æŸ¥çœ‹å½’æ¡£</a>
        </nav>
        {posts.length > 0 ? (
            <ul>
                {posts.map((post) => (
                    <li>
                        <a href={`/blog/${post.slug}`}>
                            <article>
                                <h2>{post.data.title}</h2>
                                <p class="date">{post.data.date.toLocaleDateString('zh-CN')}</p>
                                {post.data.image && <img src={post.data.image} alt={post.data.title} />}
                            </article>
                        </a>
                    </li>
                ))}
            </ul>
        ) : (
            <p>æš‚æ— æ—¥è®°ã€‚</p>
        )}
    </main>
	<footer>
		<p>&copy; {new Date().getFullYear()} æˆ‘çš„æ—¥è®°å›¾ç‰‡åšå®¢. ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚</p>
		<p>lamberts.space</p>
	</footer>
</Layout>

<style>
    main {
        padding: 1rem;
    }
    ul {
        list-style-type: none;
        padding: 0;
    }
    li {
        margin-bottom: 2rem;
    }
    article {
        background: white;
        border-radius: 8px;
        padding: 1rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    h2 {
        margin-top: 0;
    }
    .date {
        color: #666;
        font-style: italic;
    }
    img {
        max-width: 100%;
        height: auto;
        margin-top: 1rem;
    }
    footer {
        text-align: center;
        padding: 1rem;
        background: #f8f8f8;
        border-top: 1px solid #e7e7e7;
        margin-top: 2rem;
    }
    .blog-intro {
        margin: 1rem 0;
        padding: 1rem;
        background: #f8f8f8;
        border: 1px solid #e7e7e7;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    nav {
        margin-bottom: 2rem; /* å¢åŠ ä¸åšå®¢ä»‹ç»ä¹‹é—´çš„é—´è· */
    }
    ul {
        margin-top: 2rem; /* å¢åŠ ä¸å¯¼èˆªæ ä¹‹é—´çš„é—´è· */
    }
</style>